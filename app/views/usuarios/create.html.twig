{% extends "layout/base.html.twig" %}

{% block content %}
<h1>Crear Nuevo Usuario</h1>
<a href="/?page=gestion_usuarios" class="back-link"><i class="fas fa-arrow-left"></i> Volver a la Gestión</a>

<div class="container">
    {% if error_message %}
        <div class="alert error">{{ error_message }}</div>
    {% endif %}

    <form action="/usuarios/crear" method="post">
        <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
        <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" required>
        </div>
        <div class="form-group">
            <label for="apellido">Apellido:</label>
            <input type="text" id="apellido" name="apellido" required>
        </div>
        <div class="form-group">
            <label for="dni">DNI:</label>
            <input type="text" id="dni" name="dni" required>
        </div>
        <div class="form-group">
            <label for="password">Contraseña:</label>
            <input type="password" id="password" name="password" required>
        </div>
        <div class="form-group">
            <label>Roles:</label>
            <div class="role-checkboxes">
                <label><input type="checkbox" name="role[]" value="agente"> Agente</label>
                <label><input type="checkbox" name="role[]" value="jefe"> Jefe</label>
                <label><input type="checkbox" name="role[]" value="supervisor"> Supervisor</label>
                <label><input type="checkbox" name="role[]" value="rrhh"> RRHH</label>
                <label><input type="checkbox" name="role[]" value="admin"> Admin</label>
                <label><input type="checkbox" name="role[]" value="profesional"> Profesional</label>
                <label><input type="checkbox" name="role[]" value="personal_de_turnos"> Personal de Turnos</label>
            </div>
        </div>
        <div class="form-group">
            <label for="jefe">Jefe Asignado:</label>
            <select id="jefe" name="jefe">
                <option value="">Ninguno</option>
                {% for persona in jefes_supervisores %}
                    <option value="{{ persona.age_id }}">{{ persona.age_apell1 ~ ' ' ~ persona.age_nombre }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="supervisor">Supervisor Asignado:</label>
            <select id="supervisor" name="supervisor">
                <option value="">Ninguno</option>
                {% for persona in jefes_supervisores %}
                    <option value="{{ persona.age_id }}">{{ persona.age_apell1 ~ ' ' ~ persona.age_nombre }}</option>
                {% endfor %}
            </select>
        </div>
        <input type="submit" value="Crear Usuario">
    </form>
</div>
{% endblock %}
